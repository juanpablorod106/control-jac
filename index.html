<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control Jack - NABEP</title>
    <!-- Incluir la biblioteca de Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="./Assets/icon-w.jpeg" type="image/png">

</head>
<body>
    <div class="app-container">
        <!-- Barra de navegaci√≥n -->
        <div class="app-bar">
            <h1 id="titulo-vista">Inicio</h1>
            <div class="interruptor-modo" onclick="alternarModoOscuro()">
                <span id="texto-modo">Modo oscuro</span>
                <div class="interruptor" id="interruptor-modo"></div>
            </div>
        </div>

        <!-- Vista de Inicio -->
        <div id="vista-inicio" class="view active">
            <img src="./Assets/icon-w.jpeg" alt="Logo NABEP" class="logo">
            <h2 class="titulo">Bienvenido</h2>
            <p class="subtitulo">Control de los equipos sobre ruedas de NABEP.</p>
            
            <button class="boton boton-primario" onclick="cambiarVista('inicio_de_sesion')">Iniciar sesi√≥n</button>
            <button class="boton boton-secundario" onclick="cambiarVista('registrarse')">Crear cuenta</button>
            <button class="boton boton-exportar" onclick="exportarKilometraje()">Exportar Excel</button>
        </div>

        <!-- Vista de Inicio de Sesi√≥n -->
        <div id="vista-inicio_de_sesion" class="view">
            <button class="boton boton-volver" onclick="cambiarVista('inicio')">Volver al inicio</button>
            <h2 class="titulo">Ingrese sus datos</h2>
            
            <div id="mensaje-error-login" class="mensaje-error">
                Usuario o contrase√±a incorrectos
            </div>
            
            <div class="form-group">
                <label for="usuario-login">Cedula</label>
                <input type="text" id="usuario-login" class="campo" placeholder="Ingrese su cedula">
            </div>
            
            <div class="form-group">
                <label for="contrasena-login">Contrase√±a</label>
                <input type="password" id="contrasena-login" class="campo" placeholder="Ingrese su contrase√±a">
            </div>
            
            <button class="boton boton-primario" onclick="verificarLogin()">Iniciar sesi√≥n</button>
        </div>

        <!-- Vista de Registro -->
        <div id="vista-registrarse" class="view">
            <button class="boton boton-volver" onclick="cambiarVista('inicio')">Volver al inicio</button>
            <h2 class="titulo">Ingrese sus datos</h2>
            
            <div id="mensaje-error-registro" class="mensaje-error"></div>
            <div id="mensaje-exito-registro" class="mensaje-exito"></div>
            
            <div class="form-group">
                <label for="usuario-registro">Usuario</label>
                <input type="text" id="usuario-registro" class="campo" placeholder="Ingrese su nombre de usuario">
            </div>
            
            <div class="form-group">
                <label for="contrasena-registro">Contrase√±a</label>
                <input type="password" id="contrasena-registro" class="campo" placeholder="Ingrese su contrase√±a">
            </div>
            
            <div class="form-group">
                <label for="nombre">Nombre del trabajador</label>
                <input type="text" id="nombre" class="campo" placeholder="Ingrese su nombre">
            </div>
            
            <div class="form-group">
                <label for="apellido">Apellido del trabajador</label>
                <input type="text" id="apellido" class="campo" placeholder="Ingrese su apellido">
            </div>
            
            <div class="form-group">
                <label for="cedula">ID/C√©dula</label>
                <input type="text" id="cedula" class="campo" placeholder="Ingrese su c√©dula de identidad">
            </div>
            
            <button class="boton boton-primario" onclick="registrarUsuario()">Registrar Usuario</button>
        </div>
        
        <!-- Vista de Ingreso de Equipo -->
        <div id="vista-qrpage" class="view">
            <div class="app-bar">
                <h1>Ingreso de equipo</h1>
            </div>
            <h2 class="titulo">Ingrese los datos de su recorrido</h2>
            
            <button class="boton boton-primario" onclick="salir_form()">Volver al inicio</button>

            <div id="qr-reader" style="width: 300px;"></div>
            <button class="boton boton-secundario" onclick="iniciarEscaneo()">Escanear QR del equipo</button>
            <button class="boton boton-secundario" onclick="escanearQREnGaleria()">Abrir QR desde la galer√≠a</button>
            <input type="file" accept="image/*" id="input-qr-galeria" style="display:none;">

            
            <div class="seccion">
                <div class="form-group">
                    <label for="equipo">Identificaci√≥n del equipo</label>
                    <input type="text" id="equipo" class="campo" placeholder="Ingrese la identificaci√≥n del equipo a circular el d√≠a de hoy" disabled>
                </div>
                
                <div class="form-group">
                    <label for="modelo">Modelo del equipo</label>
                    <input type="text" id="modelo" class="campo" placeholder="Ingrese el modelo del equipo a circular el d√≠a de hoy" disabled>
                </div>
                
                <div class="form-group">
                    <label for="placa">Placa del equipo</label>
                    <input type="text" id="placa" class="campo" placeholder="Ingrese la placa del equipo a circular el d√≠a de hoy" disabled>
                </div>
                
                <div class="form-group">
                    <label for="tasa">Tasa en bolivares</label>
                    <input id="tasa" class="campo" placeholder="Ingrese la tasa del precio del litro de gasolina en Bs.D al d√≠a">
                </div>
                
                <div class="form-group">
                    <label for="litros">Ingrese el monto en dolares de los litros ingresados</label>
                    <input id="litros" class="campo" placeholder="Ingresar el numero por ejemplo '10'">
                </div>

                <div class="form-group">
                    <label for="litros_ingresados">Ingrese cuantos litros de gasolina se ingresaron al cargar combustible</label>
                    <input id="litros_ingresados" class="campo" placeholder="Ingresar exactamente cuantos litros se ingresaron al equipo al cargar combustible">
                </div>
            </div>
            
            <div class="seccion">
                <h3 class="seccion-titulo">Kilometraje de los equipos</h3>
                
                <div class="form-group">
                    <label for="km-inicial">Ingrese el kilometraje inicial del equipo</label>
                    <input id="km-inicial" class="campo" placeholder="Ingrese el kilometraje inicial del equipo">
                </div>
                
                <div class="form-group">
                    <label for="km-intermedio">Ingrese el kilometraje intermedio del equipo</label>
                    <input id="km-intermedio" class="campo" placeholder="Ingrese el kilometraje intermedio del equipo">
                </div>
                
                <div class="form-group">
                    <label for="km-final">Ingrese el kilometraje final del equipo</label>
                    <input id="km-final" class="campo" placeholder="Ingrese el kilometraje al final del d√≠a del equipo">
                </div>
            </div>
            
            <div class="seccion">
                <h3 class="seccion-titulo">Litraje de los equipos</h3>
                
                <div class="form-group">
                    <label for="lt-inicial">Ingrese la gasolina inicial del equipo</label>
                    <select id="lt-inicial" class="campo">
                        <option value="">Seleccione una opci√≥n</option>
                        <option value=80>FULL</option>
                        <option value=70>7/8</option>
                        <option value=60>3/4</option>
                        <option value=50>5/8</option>
                        <option value=40>1/2</option>
                        <option value=30>3/8</option>
                        <option value=20>1/4</option>
                        <option value=10>1/8</option>
                        <option value=0>VACIO</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="lt-intermedio">Ingrese la gasolina intermedia del equipo</label>
                    <select id="lt-intermedio" class="campo">
                        <option value="">Seleccione una opci√≥n</option>
                        <option value=80>FULL</option>
                        <option value=70>7/8</option>
                        <option value=60>3/4</option>
                        <option value=50>5/8</option>
                        <option value=40>1/2</option>
                        <option value=30>3/8</option>
                        <option value=20>1/4</option>
                        <option value=10>1/8</option>
                        <option value=0>VACIO</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="lt-final">Ingrese la gasolina final del equipo</label>
                    <select id="lt-final" class="campo">
                        <option value="">Seleccione una opci√≥n</option>
                        <option value=80>FULL</option>
                        <option value=70>7/8</option>
                        <option value=60>3/4</option>
                        <option value=50>5/8</option>
                        <option value=40>1/2</option>
                        <option value=30>3/8</option>
                        <option value=20>1/4</option>
                        <option value=10>1/8</option>
                        <option value=0>VACIO</option>
                    </select>
                </div>
            </div>
            <!--
            <div class="form-group">
                <h3 class="seccion-titulo">Mantenimiento</h3>
                <label for="km-mantenimiento">Kilometraje de mantenimiento:</label>
                <input class="campo" id="km-mantenimiento" placeholder="Ej. 181000" />
                <button class="campo" onclick="mostrarMantenimientoPorEquipo()">Ver mantenimiento actual</button>
                <button class="campo" onclick="guardarKilometraje()">Guardar mantenimiento</button>
        
                <p class="campo">üõ†Ô∏è √öltimo mantenimiento: <span id="label-km-actual">--</span> km</p>
                <p class="campo">üîß Pr√≥ximo mantenimiento: <span id="label-km-proximo">--</span> km</p>
            </div>
            -->

            <button class="boton boton-primario" onclick="registrarKilometraje()">Registrar en el sistema</button>
        </div>  
    </div>
    <script src="script.js"></script>
    <script src="https://unpkg.com/html5-qrcode"></script>
    <script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>
</body>
</html>